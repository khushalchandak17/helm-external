defaultNamespace: velero

helm:
  repo: https://vmware-tanzu.github.io/helm-charts
  chart: velero
  version: "2.32.1"
  releaseName: velero
  valuesFiles:
    - values.yaml

diff:
  comparePatches:
    - apiVersion: apps/v1
      kind: Deployment
      name: velero
      namespace: velero
      operations:
        - { "op": "remove", "path": "/spec/template/spec/containers" }

targetCustomizations:
  # AWS local
  - name: aws-downstream
    clusterSelector:
      matchLabels:
        cloud: aws
        rancher_dedicated: "true"
    helm:
      valuesFiles:
        - aws-local.yaml

  # AWS downstream
  - name: aws-local
    clusterSelector:
      matchLabels:
        cloud: aws
    helm:
      valuesFiles:
        - aws-downstream.yaml

  # OnPrem local
  - name: vsphere-local
    clusterSelector:
      matchLabels:
        cloud: vsphere
        rancher_dedicated: "true"
    helm:
      valuesFiles:
        - vsphere-local.yaml

  # On-Prem wv - QA
  - name: op-orw-xcr-svcs01qa
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-xcr-svcs01qa
    helm:
      valuesFiles:
        - op-orw-xcr-svcs01qa.yaml

  - name: op-orw-sc-qa01
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-sc-qa01
    helm:
      valuesFiles:
        - op-orw-sc-qa01.yaml

  - name: op-orw-sc-qa02
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-sc-qa02
    helm:
      valuesFiles:
        - op-orw-sc-qa02.yaml

  - name: op-orw-sc-qa03
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-sc-qa03
    helm:
      valuesFiles:
        - op-orw-sc-qa03.yaml

  - name: op-orw-cf-qa04
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-cf-qa04
    helm:
      valuesFiles:
        - op-orw-cf-qa04.yaml

  - name: op-orw-kaas-qa03
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-kaas-qa03
    helm:
      valuesFiles:
        - op-orw-kaas-qa03.yaml

  # On-Prem wv - Prod
  - name: op-orw-rc-svcs01
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-rc-svcs01
    helm:
      valuesFiles:
        - op-orw-rc-svcs01.yaml

  - name: op-orw-sc-prod01
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-sc-prod01
    helm:
      valuesFiles:
        - op-orw-sc-prod01.yaml

  - name: op-orw-mom-prod04
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-mom-prod04
    helm:
      valuesFiles:
        - op-orw-mom-prod04.yaml

  - name: op-orw-calibre-prod02
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-calibre-prod02
    helm:
      valuesFiles:
        - op-orw-calibre-prod02.yaml

  - name: op-orw-calibre-prod05
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-calibre-prod05
    helm:
      valuesFiles:
        - op-orw-calibre-prod05.yaml

  - name: op-orw-xcd-prod06
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-xcd-prod06
    helm:
      valuesFiles:
        - op-orw-xcd-prod06.yaml

  - name: op-orw-tc-dev01
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-tc-dev01
    helm:
      valuesFiles:
        - op-orw-tc-dev01.yaml
