defaultNamespace: cattle-gatekeeper-system

helm:
  repo: https://charts.rancher.io
  chart: rancher-gatekeeper
  version: 100.0.1+up3.6.0
  releaseName: rancher-gatekeeper
  values:
    disableValidatingWebhook: false
    enableDeleteOperations: true
    logDenies: true
    controllerManager:
      exemptNamespaces:
        # Generated list from Chart.yaml in https://github.com/rancher/charts
        - cattle-externalip-system
        - cattle-fleet-system
        - cattle-gatekeeper-system
        - cattle-istio-system
        - cattle-logging-system
        - cattle-monitoring-system
        - cattle-resources-system
        - cattle-sriov-system
        - cattle-system
        - cattle-windows-gmsa-system
        - cattle-wins-system
        - cis-operator-system
        - fleet-system
        - istio-system
        - kube-system
        - longhorn-system
        - rio-system
        - cert-manager
        - ingress-nginx

dependsOn:
  - name: rancher-gatekeeper-crd

targetCustomizations:
  # AWS us-east-1 prod
  - name: svcs01-prod
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: aws-usea1-rc-svcs01
    helm:
      values:
        disableValidatingWebhook: false

  - name: preprod01-prod
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: aws-usea1-sc-preprod01
    helm:
      values:
        disableValidatingWebhook: false

  - name: prod01-prod
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: aws-usea1-sc-prod01
    helm:
      values:
        disableValidatingWebhook: false

  # AWS us-east-1 qa
  - name: svcs01-qa
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: aws-usea1-rc-svcs01qa
    helm:
      values:
        disableValidatingWebhook: false

  - name: qa01-qa
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: aws-usea1-sc-qa01
    helm:
      values:
        disableValidatingWebhook: false

  # AWS eu-west-1 prod
  - name: svcs01eu-prod
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: aws-euwe1-rc-svcs01eu
    helm:
      values:
        disableValidatingWebhook: false

  # On-Prem Wargaming
  - name: wargaming02-qa
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-rc-wargame02
    helm:
      values:
        disableValidatingWebhook: false

  - name: wargaming03-qa
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: op-orw-rc-wargame03
    helm:
      values:
        disableValidatingWebhook: true
