defaultNamespace: cattle-gatekeeper-system

helm:
  repo: https://charts.rancher.io
  chart: rancher-gatekeeper
  version: 100.0.1+up3.6.0
  releaseName: rancher-gatekeeper
  values:
    disableValidatingWebhook: false

dependsOn:
  - name: rancher-gatekeeper-crd

diff:
  comparePatches:
    - apiVersion: admissionregistration.k8s.io/v1
      kind: ValidatingWebhookConfiguration
      name: gatekeeper-validating-webhook-configuration
      operations:
        - { "op": "remove", "path": "/webhooks/0/clientConfig/caBundle" }
        - { "op": "remove", "path": "/webhooks/0/rules" }
        - { "op": "remove", "path": "/webhooks/1/clientConfig/caBundle" }
        - { "op": "remove", "path": "/webhooks/1/rules" }
      jsonPointers:
        - "/webhooks/0/clientConfig/caBundle"
        - "/webhooks/0/rules"
        - "/webhooks/1/clientConfig/caBundle"
        - "/webhooks/1/rules"
