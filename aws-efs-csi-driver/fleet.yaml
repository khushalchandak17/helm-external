defaultNamespace: kube-system

# kustomize:
#   dir: ./kustomize

helm:
  repo: https://kubernetes-sigs.github.io/aws-efs-csi-driver
  chart: aws-efs-csi-driver
  version: "2.2.6"
  releaseName: aws-efs-csi-driver
  values:
    imagePullSecrets:
      - dockerhub
    image:
      pullPolicy: Always
    sidecars:
      livenessProbe:
        image:
          pullPolicy: Always
      nodeDriverRegistrar:
        image:
          pullPolicy: Always
      csiProvisioner:
        image:
          pullPolicy: Always

targetCustomizations:
  # AWS us-east-1 - Prod
  ###
  # TODO: temp fix for EFS CSI to access secrets
  # Ref https://github.com/kubernetes-sigs/aws-efs-csi-driver/pull/677/files
  # Ref https://github.com/kubernetes-sigs/aws-efs-csi-driver/pull/708/files
  ###
  - name: aws-usea1-tcx-preprod02
    clusterSelector:
      matchLabels:
        management.cattle.io/cluster-display-name: aws-usea1-tcx-preprod02
    helm:
      version: "2.2.5"
      valuesFiles:
        - aws-usea1-tcx-preprod02.yaml
